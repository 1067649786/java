# 1 进程与线程基本概念

## 1.1 进程产生的背景
最初的计算机只能接收一些特定的指令，用户每输入一个指令，计算机就做出一个操作。
当用户在思考或者输入时，计算机就在等待。这样效率非常底下，在很多时候，计算机都处在等待状态。
<br>

**批处理操作系统**<br>

后来有了`批处理操作系统`把一系列需要操作的指令写下来，形成一个清单，
一次性交给计算机。用户将多个需要执行的程序写在磁带上，然后交由计算机去
读取并逐个执行这些程序，并将输出结果写在另一个磁带上。<br><br>
批处理操作系统在一定程度上提高了计算机的效率，但是由于`批处理操作系统
的指令运行方式仍然时串行的，内存中始终只有一个程序在运行`，后面的程序需要等待
前面的程序执行完成后才能开始执行，而前面的程序有时会由于I/O操作、网络
等原因阻塞，所以`批处理操作效率也不高`。<br>

**进程的提出**<br>

人们对于计算机的性能要求越来越高，现有的批处理操作系统并不能满足人们的需求，
而批处理操作系统的瓶颈在于内存中只存在一个程序，那么内存中能不能存在多个程序呢？
这是人们有待解决的问题。<br>

于是，科学家们提出了进程的概念<br>

进程就是`应用程序在内存中分配的空间，也就是正在运行的程序`，各个进程之间
互不干扰。同时进程保存着程序每一个时刻运行的状态。<br>

> 程序：用某种编程语言(java、python等)编写，能够完成一定任务或者功能的代码集合，
>时指定和数据的有序集合，是一段静态代码。

<br>

此时，CPU采用时间片轮转的方式运行进程：CPU为每个进程分配一个时间段，称作它的时间片。
如果在时间片结束时进程还在运行，则暂停这个进程的运行，并且CPU分配给另一个进程(这个过程叫做上下文切换)。
如果进程在时间片结束前阻塞或结束，则CPU立即进行切换，不用等待时间片用完。<br>

>当进程暂停时，它会保存当前进程的状态(进程标识、进程使用的资源等)，在下一次
>切换回来时根据之前保存的状态进行恢复，接着继续执行。

<br>

使用进程+CPU时间片轮转方式的操作系统，在宏观上看起来同一时间段执行多个任务，
换句话说，`进程让操作系统的并发成为了可能`。虽然并发从宏观上看有多个任务执行，
但事实上，对于`单核CPU`来说，任意具体时刻都只有一个任务在占用CPU资源。<br><br>

**对操作系统的要求进一步提高**
<br><br>
虽然进程的出现，使得操作系统的性能大大提升，但是随着时间的推移，人们并不满足一个进程
在一段时间只能做一件事情，如果一个进程有多个子任务，只能逐个地执行这些子任务，很影响效率。
<br>
>比如杀毒软件在检测用户电脑时，如果在某一项检测中卡住了，那么后面的检测项也会受到影响。
>或者说当你使用杀毒软件中的扫描病毒功能时，在扫描病毒结束之前，无法使用杀毒软件中清理垃圾的功能，
>这显然无法满足人们的要求。

<br>

**线程的提出**
<br><br>

那么能不能让这些子任务同时执行呢？于是人们又提出了线程的概念，`让一个线程执行一个子任务，
这样一个进程就包含了多个线程，每个线程负责一个单独的子任务`。<br>

>使用线程之后，事情就变得简单多了。当用户使用扫描病毒功能时，就让扫描病毒这个线程去执行。
>同时，如果用户又使用清理垃圾功能，那么可以先暂停扫描病毒线程，先响应用户的清理垃圾的操作，
>让清理垃圾这个线程去执行。响应完后再切换回来，接着执行扫描病毒线程。

<br>

总之，进程和线程的提出极大地提高了操作提供的性能。`进程让操作系统的并发性成为了可能，
而线程让进程的内部并发成为了可能`。
<br>